import{c as me,r as c,j as e,Q as he,a as ge,M as fe,b as be,d as s,B as m,e as G,A as Q,f as ye,F as v,T as k,g as w,S as D,u as xe,h as _,i as j,k as ke,l as B,L as ve,m as we,n as Ce,o as N,N as p,p as u,q as T,s as F,t as M,v as A,w as z,D as U,C as Se,I as Ae,x as H,y as Ie,z as W,E as Be,G as Y,H as V,O as Re,J as De,K as Oe,P as Le,R as K,U as Pe,V as Ne,W as R,X as Ee,Y as Te,Z as Fe,_ as Me,$ as _e,a0 as ze,a1 as Ue,a2 as He,a3 as We}from"./modu-CgMvA4TD.js";import{u as Je,e as I,S as qe}from"./ln-Dn-LsZK4.js";import"./index-rLHPxl3p.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();function kt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const $e=(t="default")=>{const n={primary:{main:"#1976d2",light:"#42a5f5",dark:"#1565c0"},secondary:{main:"#9c27b0",light:"#ba68c8",dark:"#7b1fa2"}};switch(t){case"qeh":n.primary.main="#bb5a79",n.primary.light="#f06292",n.primary.dark="#880e4f",n.secondary.main="#74565e",n.secondary.light="#bcaaa4",n.secondary.dark="#4b2c20";break;case"red":n.primary.main="#9b3e61",n.primary.light="#f06292",n.primary.dark="#880e4f",n.secondary.main="#74565f",n.secondary.light="#bcaaa4",n.secondary.dark="#4b2c20";break;case"purple":n.primary.main="#904ae4",n.primary.light="#b39ddb",n.primary.dark="#6a1b9a",n.secondary.main="#655a6f",n.secondary.light="#9e9e9e",n.secondary.dark="#212121";break;case"green":n.primary.main="#00c0a9",n.primary.light="#69f0ae",n.primary.dark="#009688",n.secondary.main="#7c968f",n.secondary.light="#b2dfdb",n.secondary.dark="#4a5c59";break;case"blue":n.primary.main="#1c77ff",n.primary.light="#6ec6ff",n.primary.dark="#004ecb",n.secondary.main="#245eab",n.secondary.light="#90caf9",n.secondary.dark="#003c8f";break}return me({typography:{fontFamily:["Arial","Cambria","Roboto","Microsoft JhengHei UI","Segoe UI","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue","sans-serif"].join(","),htmlFontSize:16,fontSize:14,button:{textTransform:"none"},h1:{fontSize:"2.25rem"},h2:{fontSize:"1.75rem"},h3:{fontSize:"1.5rem"},h4:{fontSize:"1.3rem",fontWeight:500},h5:{fontSize:"1.15rem"}},palette:{background:{default:"#fff"},...n}})},J="COOKIE_KEY_CURRENT_USER",X="LOCAL_STORE_KEY_CORP_ID";class q extends Error{constructor(n){super(n.message),this.requestUrl=n.requestUrl,this.requestOptions=n.requestOptions,this.statusCode=n.statusCode,this.statusText=n.statusText,this.responseErrorBody=n.responseErrorBody,this.cause=n.cause,this.name="ApiError",Error.captureStackTrace&&Error.captureStackTrace(this,q)}}const d=(t,n=[])=>!(t==null||!n.includes("allow-empty-string")&&t===""||n.includes("disallow-whitespace")&&typeof t=="string"&&t.trim()===""||n.includes("disallow-empty-array")&&Array.isArray(t)&&t.length===0||n.includes("disallow-empty-object")&&typeof t=="object"&&Object.keys(t).length===0||n.includes("disallow-nan")&&typeof t=="number"&&Number.isNaN(t)),ee=()=>window.location.toString().startsWith("http://localhost"),te=c.createContext({}),je=({children:t})=>{const n=c.useCallback(async()=>{const o=await ne();i(a=>({...a,...o}))},[]),[r,i]=c.useState(()=>{const o=ee()?Ke(J):void 0,a={};return Object.assign(a,{apiBase:"",version:"",currentUser:d(o)?JSON.parse(o):void 0}),n(),a});return e(te.Provider,{value:{...r,setAppContextState:i},children:t})},ne=async()=>{const t=`/qeh-xrbs-app/release.json?t=${new Date().getTime()}`;try{return{...await(await fetch(t)).json(),releaseJsonfetchedOn:new Date}}catch(n){throw new q({message:`Release Json fetch error - ${n}`,requestUrl:t})}},x=()=>c.useContext(te);function Ke(t){const n=t+"=",i=decodeURIComponent(document.cookie).split(";");for(let o=0;o<i.length;o++){let a=i[o];for(;a.charAt(0)==" ";)a=a.substring(1);if(a.indexOf(n)==0)return a.substring(n.length,a.length)}return""}const Xe=({children:t})=>{const{enqueueSnackbar:n}=Je(),r=c.useCallback((o,a)=>{var b;const l=(b=o==null?void 0:o.responseErrorBody)==null?void 0:b.message,g=d(l)?l:o.message,f=a;if(d(f)){n(`${f} error: ${g}`,{variant:"error"});return}n(`Error: ${g}`,{variant:"error"})},[n]),i=c.useMemo(()=>new he({queryCache:new ge({onError:(o,a)=>{var l;r(o,(l=a.meta)==null?void 0:l.taskDescription)}}),mutationCache:new fe({onError:(o,a,l,g)=>{var f;r(o,(f=g.meta)==null?void 0:f.taskDescription)}}),defaultOptions:{queries:{retry:0}}}),[r]);return e(be,{client:i,children:t})};let E=null;const oe=(t,n)=>{c.useEffect(()=>{if(t)try{if("NDEFReader"in window){E=new AbortController;const i=new NDEFReader;i.scan({signal:E.signal}).then(()=>{i.onreading=({serialNumber:o})=>{n(o,null)}}).catch(o=>{n(null,o)})}else{const i="Web NFC is not supported in this browser.";n(null,new Error(i))}}catch(i){n(null,i)}const r=()=>{E&&E.abort()};return()=>{r()}},[n,t])},Ze=({nfcOn:t})=>{const[n,r]=c.useState(),i=c.useRef(""),o=c.useCallback((a,l)=>{if(l!==null){l.toString().includes("AbortError")||I(`NFC error: ${l}`,{variant:"error"});return}if(a!==null&&i.current!==a){i.current=a,I("NFC scanned",{variant:"success"}),r(a),setTimeout(()=>{i.current=""},3e3);return}I("NFC error: unknown",{variant:"error"})},[]);return oe(t,o),s(v,{children:[s(m,{sx:{borderRadius:2,borderWidth:1,borderStyle:"dashed",borderColor:"warning.main",color:"warning.main",padding:3,textAlign:"center"},children:[e(G,{sx:{position:"relative",top:5}})," 請拍卡"]}),d(n)&&s(Q,{severity:"info",children:[e(ye,{children:"NFC serial"}),n]})]})},Ge=()=>{const[t,n]=c.useState(!1);return s(D,{gap:1.5,sx:{py:2,maxWidth:500,margin:"auto"},children:[e(k,{variant:"h3",children:"NFC check"}),t?e(Ze,{nfcOn:t}):e(w,{onClick:()=>n(!0),variant:"contained",children:"Start NFC Check"})]})};function re(){const{setAppContextState:t}=x(),n=xe(),{pathname:r}=_();return()=>{r.includes("/pda")?n("/pda/team"):n("/"),t(i=>({...i,currentUser:void 0})),document.cookie=J+"=;expires="+new Date(0).toUTCString()+";path= /qeh-xrbs-app;"}}const Qe=()=>{const{currentUser:t}=x(),[n,r]=c.useState(j(new Date,"HH:mm")),i=re();return c.useEffect(()=>{let o=-1;const a=t==null?void 0:t.token;if(d(a)){const g=ke(a).exp*1e3;r(j(g,"HH:mm")),o=window.setTimeout(()=>{},g-new Date().getTime()-5e3)}return()=>{window.clearTimeout(o)}},[t==null?void 0:t.token,i]),e(m,{sx:{position:"fixed",bottom:15,right:112,zIndex:2},children:s(k,{variant:"caption",children:["Estimated timeout @ ",n]})})},Ye="/qeh-xrbs-app/assets/footer-kccit-logo-BRuL7_6T.svg",Ve="data:image/svg+xml,%3csvg%20width='640'%20height='84'%20viewBox='0%200%20640%2084'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_1_4)'%3e%3cpath%20d='M0%209%20H339.477%20L450%2084%20H0%20Z'%20fill='white'%20/%3e%3cpath%20d='M0%205H320.477C330.898%205%20341.059%208.25616%20349.539%2014.3133L428.461%2070.6867C436.941%2076.7438%20447.102%2080%20457.523%2080H963H1441.5'%20stroke='url(%23paint0_linear_1_4)'%20stroke-width='10'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_1_4'%20x1='188'%20y1='80.0008'%20x2='1302'%20y2='80.0007'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0.115'%20stop-color='%2350CEC2'/%3e%3cstop%20offset='0.45'%20stop-color='%2371ADFF'/%3e%3cstop%20offset='0.925'%20stop-color='%2371ADFF'%20/%3e%3c/linearGradient%3e%3cclipPath%20id='clip0_1_4'%3e%3crect%20width='640'%20height='84'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",et="data:image/svg+xml,%3csvg%20width='69'%20height='10'%20viewBox='0%200%2069%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_1_2)'%3e%3cpath%20d='M0%200H56.5469L69%2010H0V0Z'%20fill='%23B82957'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_1_2'%3e%3crect%20width='69'%20height='10'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Z=332,ie=({size:t="small"})=>{const{currentUser:n}=x(),r={small:{height:"60px",bar:"7px"},medium:{height:"80px",bar:"9px"}},i=Z,o=d(n==null?void 0:n.token)?138:0;return s(v,{children:[d(n==null?void 0:n.token)&&e(Qe,{}),e(m,{sx:{position:"fixed",bottom:0,right:i-132,display:"block",height:r[t].bar,width:"100%",background:"linear-gradient(90deg, #cee3ff, #71ADFF 40%, #71ADFF)",zIndex:1}}),s(m,{sx:{position:"fixed",bottom:0,right:0,display:"block",width:i+o,height:r[t].height,overflow:"hidden",zIndex:1,pointerEvents:"none"},children:[e(m,{component:"img",src:Ve,sx:{position:"absolute",top:0,left:-1,height:"100%",zIndex:100,transform:"scale(-1, 1)"}}),e(m,{sx:{position:"absolute",top:0,right:0,height:r[t].bar,backgroundColor:"#50CEC2",width:i-Z,zIndex:105,transform:"scale(-1, -1)"}}),e(m,{component:"img",src:et,sx:{position:"absolute",top:0,right:0,height:r[t].bar,zIndex:110,transform:"scale(-1, -1)"}}),e(m,{sx:{display:"inline-block",position:"absolute",top:r[t].bar,zIndex:120,textAlign:"right",paddingRight:1,right:0},children:e(m,{component:"img",src:Ye,height:50})})]})]})},tt=()=>{const{currentUser:t}=x(),n=re(),r=B();if(d(t))return e(m,{sx:{position:"fixed",right:-2,top:5,zIndex:1e3,color:r.palette.primary.contrastText,[r.breakpoints.down("md")]:{top:0}},children:s(D,{direction:"row",alignItems:"center",children:[e(m,{sx:{opacity:.55},children:s(D,{direction:"column",alignItems:"flex-end",children:[e(m,{sx:{marginTop:0,[r.breakpoints.down("md")]:{marginTop:-.2,maxWidth:168,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},children:t.corpId}),s(m,{sx:{fontSize:"0.7rem",marginTop:-.5,[r.breakpoints.down("md")]:{marginTop:-.7}},children:[d(t.employeeRank)?t.employeeRank:"--",d(t.ward)&&` / ${t.ward}`]})]})}),e(m,{children:e(w,{onClick:n,variant:"text",sx:{color:r.palette.primary.contrastText,minWidth:0},children:e(ve,{sx:{fontSize:"2.2rem",marginTop:0,[r.breakpoints.down("md")]:{fontSize:"2rem",marginTop:-.3}}})})})]})})},nt=()=>{const t=B(),{pathname:n}=_(),r=we({variant:"popover",popupId:"demoPopover"}),i=()=>n==="/demo-nav-users"?[e(u,{value:"/add-booking",component:"div",label:s(p,{to:"/add-booking",children:[e(N,{sx:{mb:-.9,mr:.3}})," Add Booking"]})}),e(u,{value:"/bookings/my-ward",component:"div",label:e(p,{to:"/bookings/my-ward",children:"Booking Records"})})]:n==="/demo-nav-dri"?[e(u,{value:"/add-booking",component:"div",label:s(p,{to:"/add-booking",children:[e(N,{sx:{mb:-.9,mr:.3}})," Add Booking"]})}),e(u,{value:"/bookings/general",component:"div",label:e(p,{to:"/bookings/general",children:"General Bookings"})}),e(u,{value:"/bookings/complete",component:"div",label:e(p,{to:"/bookings/complete",children:"Complete Bookings"})}),e(u,{value:"/admin",component:"div",sx:{"&.MuiButtonBase-root.MuiTab-root":{px:0,mx:0}},label:s(v,{children:[e(w,{variant:"text",...T(r),children:"System Admin"}),s(F,{sx:{"& li.MuiButtonBase-root":{p:0},"& a":{textDecoration:"none",color:t.palette.primary.main,display:"block",padding:t.spacing(.75,1.5),width:"100%"}},...M(r),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[e(A,{children:e(p,{to:"/admin/user-access",children:"User Access"})}),e(A,{children:e(p,{to:"/admin/admin-report",children:"Admin Report"})})]})]})})]:n==="/demo-nav-portable"?[e(u,{value:"/add-booking",component:"div",label:s(p,{to:"/add-booking",children:[e(N,{sx:{mb:-.9,mr:.3}})," Add Booking"]})}),e(u,{value:"/bookings/portable",component:"div",label:e(p,{to:"/bookings/portable",children:"Portable Bookings"})}),e(u,{value:"/bookings/urgent",component:"div",label:e(p,{to:"/bookings/urgent",children:"Urgent Bookings"})}),e(u,{value:"/portable-team-assignment",component:"div",label:e(p,{to:"/portable-team-location",children:"Team Location"})}),e(u,{value:"/admin",component:"div",sx:{"&.MuiButtonBase-root.MuiTab-root":{px:0,mx:0}},label:s(v,{children:[e(w,{variant:"text",...T(r),children:"System Admin"}),s(F,{sx:{"& li.MuiButtonBase-root":{p:0},"& a":{textDecoration:"none",color:t.palette.primary.main,display:"block",padding:t.spacing(.75,1.5),width:"100%"}},...M(r),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[e(A,{children:e(p,{to:"/admin/user-access",children:"User Access"})}),e(A,{children:e(p,{to:"/admin/admin-report",children:"Admin Report"})})]})]})})]:[e(u,{value:"/add-booking",component:"div",label:s(p,{to:"/add-booking",children:[e(N,{sx:{mb:-.9,mr:.3}})," Add Booking"]})}),e(u,{value:"/bookings/my-ward",component:"div",label:e(p,{to:"/bookings/my-ward",children:"Booking Records"})}),e(u,{value:"/bookings/general",component:"div",label:e(p,{to:"/bookings/general",children:"General Bookings"})}),e(u,{value:"/bookings/complete",component:"div",label:e(p,{to:"/bookings/complete",children:"Complete Bookings"})}),e(u,{value:"/bookings/portable",component:"div",label:e(p,{to:"/bookings/portable",children:"Portable Bookings"})}),e(u,{value:"/bookings/urgent",component:"div",label:e(p,{to:"/bookings/urgent",children:"Urgent Bookings"})}),e(u,{value:"/portable-team-location",component:"div",label:e(p,{to:"/portable-team-location",children:"Team Location"})}),e(u,{value:"/admin",component:"div",sx:{"&.MuiButtonBase-root.MuiTab-root":{px:0,mx:0}},label:s(v,{children:[e(w,{variant:"text",...T(r),children:"System Admin"}),s(F,{sx:{"& li.MuiButtonBase-root":{p:0},"& a":{textDecoration:"none",color:t.palette.primary.main,display:"block",padding:t.spacing(.75,1.5),width:"100%"}},...M(r),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[e(A,{children:e(p,{to:"/admin/user-access",children:"User Access"})}),e(A,{children:e(p,{to:"/admin/admin-report",children:"Admin Report"})})]})]})})];return e(Ce,{centered:!0,sx:{minHeight:t.spacing(4),backgroundColor:`${t.palette.primary.main}4d`,"& .MuiButtonBase-root":{minHeight:t.spacing(4.5),margin:t.spacing(0,1),padding:t.spacing(0,1.5),fontSize:"1rem","& > a":{lineHeight:t.spacing(4.5),textAlign:"center",display:"block",width:"100%",textDecoration:"none",color:t.palette.primary.main}}},value:n.startsWith("/admin")?"/admin":n,children:i()})},ot="/qeh-xrbs-app/assets/header-qeh-logo-white-DRNJ7WKM.svg",ae=({title:t,showNavLinks:n=!0})=>{const r=B();return s(m,{sx:{position:"fixed",top:"0px",width:"100%",minHeight:45,zIndex:1e3,backgroundColor:"background.default"},children:[s(D,{pl:2,direction:"row",spacing:4,alignItems:"center",sx:{p:.75},bgcolor:"primary.main",color:"primary.contrastText",children:[e(m,{component:"img",src:ot,sx:{height:45,[r.breakpoints.down("md")]:{height:30}}}),d(t)&&e(k,{variant:"h5",children:t})]}),n&&e(nt,{}),e(tt,{})]})},rt=({title:t,open:n,formContent:r,actionContent:i,maxWidth:o="xs",customMaxWidth:a,fullWidth:l=!0,showCloseButton:g=!0,onClose:f})=>{const b=B(),h=z`
    .MuiDialog-paper {
      max-width: ${a};
    }
    .MuiDialogContent-root {
      padding: ${b.spacing(3)};
    }
    .MuiDialogActions-root {
      padding: ${b.spacing(2,3)};
    }
  `;return s(W,{maxWidth:o,fullWidth:l,onClose:(O,L)=>{f!==void 0&&(L&&L==="backdropClick"||f())},open:n,css:h,children:[d(t)&&e(U,{sx:{m:0,p:2},children:t}),g&&e(Ae,{"aria-label":"close",onClick:f,sx:O=>({position:"absolute",right:8,top:8,color:O.palette.grey[500]}),children:e(Se,{})}),e(H,{dividers:!0,children:r}),d(i)&&e(Ie,{children:i})]})};function it(t){const[n,r]=c.useState(!1),[i,o]=c.useState(),a=()=>{r(!1),t.onCancelled!==void 0&&t.onCancelled()},l=c.useCallback(()=>{t.onConfirmed(i),r(!1)},[t,i]);return{confirmPrompt:c.useCallback((f,b)=>{o({...f,dialogContent:b}),r(!0)},[]),confirmDialog:e(rt,{title:d(t.title)?t.title:"Confirmation",maxWidth:t.maxWidth,customMaxWidth:t.customMaxWidth,open:n,onClose:a,formContent:d(i==null?void 0:i.dialogContent)&&typeof i.dialogContent!="string"?i.dialogContent:d(t.content)&&typeof t.content!="string"?t.content:e(k,{variant:"subtitle2",gutterBottom:!0,children:d(i==null?void 0:i.dialogContent)?i.dialogContent:d(t.content)?t.content:"OK to proceed?"}),actionContent:e(w,{variant:"contained",autoFocus:!0,onClick:l,children:d(t.confirmButtonLabel)?t.confirmButtonLabel:"OK"})})}}const se=()=>{const{apiBase:t,version:n,releaseJsonfetchedOn:r}=x(),{confirmDialog:i,confirmPrompt:o}=it({title:"New Release",maxWidth:"sm",onConfirmed:()=>window.location.reload(),onCancelled:()=>window.location.reload()}),a=c.useCallback(async()=>{if(d(t)&&d(n)&&d(r)&&Be(new Date,r)>1){const l=await ne();(l.version!==n||l.apiBase!==t)&&o(void 0,e(m,{component:"span",sx:{whiteSpace:"pre-line"},children:`Update available [version - ${l.version} / API - ${t}].
                    Click OK to proceed.`}))}},[t,n,r,o]);return{newReleaseDialog:i,newReleasePrompt:a}};function ce(t){return{employeeNo:123456,corpId:t,isAdmin:!0,employeeRank:"Tester",name:"John Doe",ward:"A6",token:"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJPbmxpbmUgSldUIEJ1aWxkZXIiLCJpYXQiOjE3Mzk5NzA5ODMsImV4cCI6MTc3MjM3MDk4MywiYXVkIjoid3d3LmV4YW1wbGUuY29tIiwic3ViIjoianJvY2tldEBleGFtcGxlLmNvbSIsIkdpdmVuTmFtZSI6IkpvaG5ueSIsIlN1cm5hbWUiOiJSb2NrZXQiLCJFbWFpbCI6Impyb2NrZXRAZXhhbXBsZS5jb20iLCJSb2xlIjpbIk1hbmFnZXIiLCJQcm9qZWN0IEFkbWluaXN0cmF0b3IiXX0.lwIvhuS3MKznF9D6cluxaoaheBXnINw_BH0EiW9v1zs"}}function at(){return Y({mutationFn:t=>Promise.resolve(ce(t.corp)),meta:{taskDescription:"Login"}})}function st(){return Y({mutationFn:t=>(console.log(">>>>>>>>>>>> nfcSerial:",t),Promise.resolve(ce("hlh393"))),meta:{taskDescription:"Pda login"}})}const ct=({checkRelease:t=!1})=>{const{setAppContextState:n}=x(),{mutateAsync:r,isPending:i}=st(),{newReleaseDialog:o,newReleasePrompt:a}=se();c.useEffect(()=>{t&&a()},[]);const l=c.useRef(!1),g=c.useCallback(async b=>{if(!l.current){l.current=!0;try{const h=await r(b);n(C=>({...C,currentUser:h})),I("Login success.",{variant:"success"})}finally{l.current=!1}}},[r]),f=c.useCallback((b,h)=>{if(h!==null){h.toString().includes("AbortError")||I(`NFC error: ${h}`,{variant:"error"});return}if(b!==null){g(b);return}I("NFC error: unknown",{variant:"error"})},[g]);return oe(!0,f),s(W,{open:!0,children:[o,e(U,{borderBottom:1,borderColor:"gray",fontWeight:700,children:"Login"}),e(H,{children:s(m,{onClick:()=>g("e4:3e:2d:de"),sx:{mt:5,mb:2.5,mx:2,borderRadius:2,borderWidth:1,borderStyle:"dashed",borderColor:"warning.main",color:"warning.main",padding:3,textAlign:"center"},children:[i?e(V,{sx:{width:"20px !important",height:"20px !important",color:"warning.main"}}):e(G,{sx:{position:"relative",top:5}})," ","Please tab staff card"]})})]})},lt=()=>{const{currentUser:t}=x(),{pathname:n}=_(),r=B();return s(v,{children:[e(ae,{showNavLinks:!1}),e(m,{component:"main",sx:{maxWidth:800,minWidth:320,padding:r.spacing(8,2,0),margin:`0 auto ${r.spacing(10)}`},children:d(t)||n==="/pda/nfc"?e(Re,{}):e(ct,{checkRelease:!0})}),e(ie,{})]})},dt=({children:t,breadcrumbs:n=[]})=>{const r=z`
    margin-bottom: -2px;
    a {
      text-decoration: none;
    }
  `;return s(v,{children:[n.length>0&&e(Oe,{css:r,children:[...n.map(({label:i,link:o},a)=>d(o)?e(De,{to:o,children:i},o):typeof i=="string"?e(k,{children:i},i):e(c.Fragment,{children:"label"},a)),e(c.Fragment,{},"breadcrumb-tail")]}),e(k,{variant:"h1",children:t})]})},pt=({checkRelease:t=!1})=>{const n=c.useRef(!0),[r,i]=c.useState(!0),o=c.useRef(null),a=c.useRef(null),[l,g]=c.useState("none"),[f,b]=c.useState("none"),[h,C]=c.useState({username:"",password:""}),{setAppContextState:O}=x(),{mutateAsync:L}=at(),{newReleaseDialog:de,newReleasePrompt:pe}=se(),ue=async y=>{y.preventDefault(),h.username&&localStorage.setItem(X,h.username);try{const S=await L({corp:h.username,password:h.password});ee()&&(document.cookie=J+"="+JSON.stringify(S)+";expires=0;path= /qeh-xrbs-app;"),O(P=>({...P,currentUser:S}))}catch{b("inherit")}},$=y=>g(y.getModifierState("CapsLock")?"inherit":"none");return c.useEffect(()=>{var y,S;if(n.current){n.current=!1;const P=localStorage.getItem(X);P?(C({...h,username:P}),(y=a.current)==null||y.focus()):(S=o.current)==null||S.focus();try{t&&pe(),i(!1)}catch{}}return()=>{n.current=!1}},[]),s(W,{open:!0,children:[de,e(U,{borderBottom:1,borderColor:"gray",fontWeight:700,children:"Login"}),e(H,{children:e("form",{onSubmit:ue,children:s(D,{mt:2,spacing:1,children:[e(Q,{severity:"error",icon:e(Le,{}),sx:{display:f},children:e(k,{color:"#d74141",children:"Incorrect username or password"})}),e(K,{size:"small",autoFocus:!0,placeholder:"Username (CORP ID)",required:!0,ref:o,slotProps:{htmlInput:{maxLength:10,style:{width:"240px"}},formHelperText:{sx:{color:"red"}}},value:h.username,onKeyUp:$,onChange:y=>C({...h,username:y.target.value.toLowerCase()})}),e(K,{size:"small",placeholder:"Password",type:"password",required:!0,ref:a,slotProps:{input:{endAdornment:e(Pe,{position:"end",children:e(Ne,{titleAccess:"Caps lock on",color:"primary",sx:{display:l}})})}},value:h.password,onKeyUp:$,onChange:y=>C({...h,password:y.target.value})}),e(w,{variant:"contained",type:"submit",children:"Login"})]})})})]})},le=({pageHeading:t,children:n})=>{const r=B(),{currentUser:i}=x(),o=z`
    max-width: 1280px;
    min-width: 1000px;
    padding: ${r.spacing(13,4,9.5)};
    margin: auto;
  `;return s(v,{children:[e(ae,{title:"QEH XRBS"}),s("main",{css:o,children:[d(t)&&e(dt,{children:t}),d(i)?n:e(pt,{checkRelease:!0})]}),e(ie,{})]})},ut=()=>e(le,{pageHeading:"403",children:e(k,{children:"Access denied."})}),mt=()=>e(le,{pageHeading:"404",children:e(k,{children:"Page not found."})}),ht=()=>{const{apiBase:t,version:n}=x();return!d(t)||!d(n)?e(V,{sx:{display:"block",mx:"auto",mt:5}}):e(Fe,{basename:"/qeh-xrbs-app",children:s(Te,{children:[e(R,{path:"/",element:e(Ee,{to:"/demo-nav"})}),e(R,{path:"/pda",element:e(lt,{}),children:e(R,{path:"nfc",element:e(Ge,{})})}),e(R,{path:"/403",element:e(ut,{})}),e(R,{path:"/*",element:e(mt,{})})]})})},gt=()=>e(Me,{theme:$e("qeh"),children:s(He,{dateAdapter:_e,adapterLocale:ze,children:[e(Ue,{}),e(qe,{maxSnack:3,anchorOrigin:{horizontal:"center",vertical:"bottom"},children:e(je,{children:e(Xe,{children:e(ht,{})})})})]})});We(document.getElementById("root")).render(e(c.StrictMode,{children:e(gt,{})}));export{kt as g};
